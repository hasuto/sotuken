<!DOCTYPE HTML>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-73253458-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-73253458-1');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>岩手県立産業技術短期大学校バーチャル学校見学</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./pannellum.css" />
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="vrpage.css">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script> 
 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <!-- <script type="text/javascript" src="top.js"></script> -->
    <script type="text/javascript" src="./pannellum.js"></script>
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-expand-md navbar-dark" style="background-color: #004EA2;">
            <a class="navbar-brand" href="#">産技短ＶＲ学校見学</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active" id="y_campus">
                        <a class="nav-link" onclick="yahaba_school()" href="#">矢巾キャンパス</a>
                    </li>
                    <li class="nav-item" id="m_campus">
                        <a class="nav-link" onclick="mizusawa_school()" href="#">水沢キャンパス</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#usageModalLong">使い方</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#aboutModalLong">更新履歴</a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- Modal -->
        <div class="modal fade" id="usageModalLong" tabindex="-1" role="dialog" aria-labelledby="usageModalLongTitle"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="usageModalLongTitle">使い方</h5>
                    </div>
                    <div class="modal-body">
                        <ul>
                            <li><img src="images/ico_home.png" alt="ホーム">見学中に、スタート写真（校舎の外）に戻る。</li>
                            <li><img src="images/ico_exit.png" alt="次の部屋">順路に従って次の部屋に移る。</li>
                            <li><img src="images/ico_zoomin.png" alt="拡大">写真を拡大する。</li>
                            <li><img src="images/ico_zoomout.png" alt="縮小">写真を縮小する。</li>
                            <li><img src="images/ico_full.png" alt="全画面">全画面にする。※iPhoneのSafariは機能しません。</li>
                            <li><img src="images/ico_return.png" alt="元に戻す">全画面を元に戻す。※iPhoneのSafariは機能しません。</li>
                            <li><img src="images/ico_pause.png" alt="音声OFF">音声ガイドをONにする。</li>
                            <li><img src="images/ico_play.png" alt="音声ON">音声ガイドをOFFにする。</li>
                            <li><img src="images/ico_compasson.png" alt="コンパスオン">ジャイロ機能を使う。（スマートフォンのみ） </li>
                            <li><img src="images/ico_compassoff.png" alt="コンパスオフ">ジャイロ機能を使わない。（スマートフォンのみ）</li>
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">閉じる</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="aboutModalLong" tabindex="-1" role="dialog" aria-labelledby="aboutModalLongTitle"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="usageModalLongTitle">更新履歴</h5>
                    </div>
                    <div class="modal-body">
                        <ul>
                            <li>2020/06/23 学生寮を公開</li>
                            <li>2020/06/11 建築科、情報技術科を公開</li>
                            <li>2020/06/10 電気技術科、産業技術専攻科を公開</li>
                            <li>2020/06/09 電子技術科、産業デザイン科、建築設備科を公開</li>
                            <li>2020/06/08 メカトロニクス技術科、生産技術科を公開</li>
                            <li>2020/06/08 矢巾キャンパス、水沢キャンパスの施設を公開</li>
                            <li>2020/06/08 バーチャル学校見学サイトを公開</li>
                        </ul>
                        <h6 class="text-center">Special thanks!</h6>
                        <ul>
                            <li>パノラマビューア : <a href="https://pannellum.org/" class="text-dark"
                                    target="_blank">Pannellum</a></li>
                            <li>アイコン : <a href="https://icooon-mono.com/" class="text-dark" target="_blank">ICOOON
                                    MONO</a></li>
                            <li>音楽 : <a href="https://wingless-seraph.net/" class="text-dark"
                                    target="_blank">木漏れ日の放課後（作・編曲　ユーフルカ）</a></li>
                            <li>音声 : <a href="https://aws.amazon.com/jp/polly/" class="text-dark" target="_blank">Amazon
                                    Polly</a></li>
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">閉じる</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div id="panorama">
 <div id="controls">
 <div class="ctrl rounded" id="home"><img src="images/ico_home.png"></div>
 <div class="ctrl rounded" id="exit"><img src="images/ico_exit.png"></div>
 <div class="ctrl rounded" id="zoomin"><img src="images/ico_zoomin.png"></div>
 <div class="ctrl rounded" id="zoomout"><img src="images/ico_zoomout.png"></div>
 <div class="ctrl rounded" id="full"><img src="images/ico_full.png"></div>
 <div class="ctrl rounded" id="play_pause"><img src="images/ico_pause.png"></div>
 <div class="ctrl rounded" id="compass"><img src="images/ico_compasson.png"></div>
 </div>
 </div> -->


        <!-- <div class="loading">
            <span class="circle"></span>
        </div> -->
        <!-- <div id="loader">
           
        </div> -->

        <div id="yahaba_school">


            <div class="vr_content">
                <div class="vr_control">
                    <ul>
                        <li><img id="home_button" src="home_button.png"></li>
                        <li><img id="game_button" src="game_button.png"></li>

                    </ul>
                </div>
                <div class="iframe">
                    <img id="left_button" src="left_button.png">
                    <iframe id="top_yahaba_aframe" src=""></iframe>
                    <img id="right_button" src="right_button.png">
                    <!-- <div class="mask">

                    </div> -->
                </div>
                <div class="text_parent">
                    <p id="classroom_text" class="classroom_text1">
                    </p>
                    <p id="classroom_text2" class="classroom_text3"></p>
                </div>

            </div>

            <div class="yahaba_list">
                <label class="label_meka" for="mekatoro2">
                    <p>メカトロニクス科</p>
                </label>
                <input type="checkbox" id="mekatoro2" class="list mekatoro" />
                <ul id="mekatoro_list2">
                    <li><a onclick="syoukai_page('1','1')">機械加工実習場</a></li>
                    <li><a onclick="syoukai_page('1','2')">CAD/CAM室</a></li>
                    <li><a onclick="syoukai_page('1','3')">制御工学実験室</a></li>
                    <li><a onclick="syoukai_page('1','4')">電子工学実験室</a></li>

                </ul>

                <label class="label_densi" for="densi2">
                    <p>電子技術科</p>
                </label>
                <input type="checkbox" id="densi2" class="list densi" />
                <ul id="densi_list2">
                    <li><a onclick="syoukai_page('2','1')">コンピュータ実習室</a></li>
                    <li><a onclick="syoukai_page('2','2')">総合実験室</a></li>
                    <li><a onclick="syoukai_page('2','3')">無響室</a></li>

                </ul>

                <label class="label_kentiku" for="kentiku2">
                    <p>建築科</p>
                </label>
                <input type="checkbox" id="kentiku2" class="list kentiku" />
                <ul id="kentiku_list2">
                    <li><a onclick="syoukai_page('3','1')">建築実習教室</a></li>
                    <li><a onclick="syoukai_page('3','2')">環境工学実験室</a></li>
                    <li><a onclick="syoukai_page('3','3')">建築デザイン室</a></li>
                    <li><a onclick="syoukai_page('3','4')">建築cad室</a></li>
                </ul>

                <label class="label_sande" for="sande2">
                    <p>産業デザイン科</p>
                </label>
                <input type="checkbox" id="sande2" class="accordion" />
                <ul id="sande_list2">
                    <li><a onclick="syoukai_page('4','1')">デザイン実験室</a></li>
                    <li><a onclick="syoukai_page('4','2')">デザイン室</a></li>
                    <li><a onclick="syoukai_page('4','3')">木材加工室</a></li>
                    <li><a onclick="syoukai_page('4','4')">漆工室</a></li>
                    <li><a onclick="syoukai_page('4','5')">コンピュータ室</a></li>
                </ul>

                <label class="label_zyohou" for="zyohou2">
                    <p>情報技術科</p>
                </label>
                <input type="checkbox" id="zyohou2" class="accordion" />
                <ul id="zyohou_list2">
                    <li><a onclick="syoukai_page('5','1')">計算機工学実験室</a></li>
                    <li><a onclick="syoukai_page('5','2')">工作室</a></li>
                    <li><a onclick="syoukai_page('5','3')">通信実験室</a></li>
                    <li><a onclick="syoukai_page('5','4')">画像実験室</a></li>
                </ul>

                <label class="label_senkou" for="senkou2">
                    <p>産業技術科専攻技術科</p>
                </label>
                <input type="checkbox" id="senkou2" class="accordion" />
                <ul id="senkou_list2">
                    <li><a onclick="syoukai_page('6','1')">実習室</a></li>
                </ul>

                <label class="label_honkan" for="honkan2">
                    <p>本館</p>
                </label>
                <input type="checkbox" id="honkan2" class="accordion" />
                <ul id="honkan_list2">
                    <li><a onclick="syoukai_page('7','1')">多目的ホール</a></li>
                    <li><a onclick="syoukai_page('7','2')">大教室</a></li>
                    <li><a onclick="syoukai_page('7','3')">図書館</a></li>
                    <li><a onclick="syoukai_page('7','4')">学生ホール</a></li>
                    <li><a onclick="syoukai_page('7','5')">ラウンジ</a></li>
                </ul>

            </div>


            <!-- <ul style="margin-top: 10px;">
 <li><a onclick="mekatoro('mekatoro_kikaikakou','1','1')">メカトロニクス科</a></li>
 <ul id="mekatoro_list">
 <li><a onclick="syoukai_page('mekatoro_kikaikakou','1','1')">機械加工実習場</a></li>
 <li><a onclick="syoukai_page('mekatoro_cadcam','1','2')">CAD/CAM室</a></li>
 <li><a onclick="syoukai_page('mekatoro_seigyo','1','3')">制御工学実験室</a></li>
 <li><a onclick="syoukai_page('mekatoro_densi','1','4')">電子工学実験室</a></li>
 </ul>
 <li><a onclick="densi('densi_computer')">電子技術科</a></li>
 <ul id="densi_list">
 <li><a onclick="syoukai_page('densi_computer','2','1')">コンピュータ室</a></li>
 <li><a onclick="syoukai_page('densi_densikairo','2','2')">電子回路実験室</a></li>
 <li><a onclick="syoukai_page('densi_mukyo','2','3')">無響室</a></li>
 </ul>
 <li><a onclick="kentiku('kentiku_cad','3','4')">建築科</a></li>
 <ul id="kentiku_list">
 <li><a onclick="syoukai_page('kentiku_zisyuzyou','3','1')">建築実習教室</a></li>
 <li><a onclick="syoukai_page('kentiku_kougaku','3','2')">環境工学実験室</a></li>
 <li><a onclick="syoukai_page('kentiku_dezain','3','3')">建築デザイン室</a></li>
 <li><a onclick="syoukai_page('kentiku_cad','3','4')">建築cad室</a></li>
 </ul>
 <li><a onclick="sande('sande_dezainjikken','4','1')">産業デザイン科</a></li>
 <ul id="sande_list">
 <li><a onclick="syoukai_page('sande_dezainjikken','4','1')">デザイン実験室</a></li>
 <li><a onclick="syoukai_page('sande_dezain','4','2')">デザイン室</a></li>
 <li><a onclick="syoukai_page('sande_mokuzai','4','3')">木材加工室</a></li>
 <li><a onclick="syoukai_page('sande_sikou','4','4')">漆工室</a></li>
 <li><a onclick="syoukai_page('sande_computer','4','5')">コンピュータ室</a></li>
 </ul>
 <li><a onclick="zyohou('zyohou_keisanki','5','1')">情報技術科</a></li>
 <ul id="zyohou_list">
 <li><a onclick="syoukai_page('zyohou_keisanki','5','1')">計算機工学実験室</a></li>
 <li><a onclick="syoukai_page('zyohou_kousaku','5','2')">工作室</a></li>
 <li><a onclick="syoukai_page('zyohou_tusin','5','3')">通信実験室</a></li>
 </ul>
 <li><a onclick="senkou('zyohou_keisanki','6','1')">産業技術科専攻技術科</a></li>
 <ul id="senkou_list">
 <li><a onclick="syoukai_page('zyohou_keisanki','6','1')">実習室</a></li>
 </ul>
 <li><a onclick="honkan('zyohou_keisanki','7','1')">本館</a></li>
 <ul id="honkan_list">
 <li><a onclick="syoukai_page('zyohou_keisanki','7','1')">多目的ホール</a></li>
 <li><a onclick="syoukai_page('zyohou_kousaku','7','2')">大教室</a></li>
 <li><a onclick="syoukai_page('zyohou_tusin','7','3')">図書館</a></li>
 <li><a onclick="syoukai_page('zyohou_tusin','7','4')">学生ホール</a></li>
 <li><a onclick="syoukai_page('zyohou_tusin','7','5')">ラウンジ</a></li>
 </ul>
 </ul> -->
        </div>

        <div id="mizusawa_school">
            <iframe id="top_mizusawa_aframe" src="" width="1500px" height="400px"></iframe>

        </div>

        <!-- <div id="welcome">
            <p>産技短バーチャル学校見学へようこそ。</p>
            <p>このサイトでは、360度カメラで撮影した産技短の施設内の様子を、VR画像で見ることができます。 また、音声をオンにすると各教室の解説を聞くことができます。
            </p>
            <p>映像は自動的に回転していますが、マウスや指で回転を止めたり、映像を大きくしたり小さくしたりできます。 スマートフォンでご覧の方は、端末の動きに合わせて見たい方向の映像を見られます。
            </p>
            <p>それでは、バーチャル学校見学をお楽しみください。</p>
        </div> -->
        <hr>
        <div class="text-center">
            <a href="https://www.iwate-it.ac.jp/" class="text-dark">&copy; 2020 Iwate Industrial Technology Junior
                College</a>
        </div>
    </div>
    <audio id="bgm" src="./sounds/bgm.mp3" autoplay loop>
        あなたのブラウザーは <code>audio</code>要素をサポートしていません。
    </audio>
    <audio id="guide" autoplay>
    </audio>
    </div>
    <script>

        var result = [];
        var csv_column;
        var this_text; //各科の紹介文格納用
        var this_id1; //紹介文をcsvファイルから読み込むための、id
        var this_id2;//紹介文をcsvファイルから読み込むための、id
        var reset_txt;
        console.log("aaaaa");
        var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        Top_yahaba_Aframe.src = "yahaba_school_top.html";
        var Top_mizusawa_Aframe = document.getElementById('top_mizusawa_aframe');
        Top_mizusawa_Aframe.src = "mizusawa_school_top.html";
        document.getElementById('mizusawa_school').style.display = 'none';
        document.getElementById('right_button').style.visibility = 'hidden';
        document.getElementById('left_button').style.visibility = 'hidden';




        // const loading = document.getElementById('loader');

        // window.addEventListener('load', () => {
        //     setTimeout(function(){
        //         loading.classList.add('hide');
        //     },3000)
            
        // }, false);
        window.onload = ()=>{

            const loading = document.getElementById('loader');
            getCSV();
            loading.classList.add('loaded');
        }
       

        //htmlでiframeが読み込まれたら実行
        $('#top_yahaba_aframe').on('load', function () {
            //iframeのdocumentを取得する（Mozilla系 || 古いIE系）
            var doc = this.contentDocument || this.contentWindow.document;


            //iframeの中のhtmlのidが一致するオブジェクトを押すと実行
            //下記に各科を追加していく
            $("#top_yahaba_aframe").contents().find(doc.getElementById('Maru')).on("click", function (e) {
                syoukai_page('2', '1');
            });
            $("#top_yahaba_aframe").contents().find(doc.getElementById('kousya')).on("click", function (e) {
                syoukai_page('3', '1');
            });
        });



        //左右のボタン表示の処理
        function button_visi() {

            if (document.getElementById('top_yahaba_aframe').getAttribute('src') != 'yahaba_school_top.html') {


                document.getElementById('right_button').style.visibility = 'visible';
                document.getElementById('left_button').style.visibility = 'visible';
                document.getElementById('right_button').classList.add("fadein");
                document.getElementById('left_button').classList.add("fadein");





            }
        }

        //追加箇所



        document.getElementById('mekatoro2').addEventListener('click', function (e) {

            if (document.getElementById("mekatoro2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("kentiku2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("honkan2").checked = false;

                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('densi2').addEventListener('click', function (e) {

            if (document.getElementById("densi2").checked) {

                document.getElementById("mekatoro2").checked = false;
                document.getElementById("kentiku2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("honkan2").checked = false;
                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('kentiku2').addEventListener('click', function (e) {

            if (document.getElementById("kentiku2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("mekatoro2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("honkan2").checked = false;

                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('sande2').addEventListener('click', function (e) {

            if (document.getElementById("sande2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("mekatoro2").checked = false;
                document.getElementById("kentiku2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("honkan2").checked = false;
                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('zyohou2').addEventListener('click', function (e) {

            if (document.getElementById("zyohou2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("mekatoro2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("kentiku2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("honkan2").checked = false;
                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('senkou2').addEventListener('click', function (e) {

            if (document.getElementById("senkou2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("mekatoro2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("kentiku2").checked = false;
                document.getElementById("honkan2").checked = false;
                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('honkan2').addEventListener('click', function (e) {

            if (document.getElementById("honkan2").checked) {

                document.getElementById("densi2").checked = false;
                document.getElementById("mekatoro2").checked = false;
                document.getElementById("sande2").checked = false;
                document.getElementById("zyohou2").checked = false;
                document.getElementById("senkou2").checked = false;
                document.getElementById("kentiku2").checked = false;
                console.log("okd");
            } else {
                console.log("notok");
            }
        });

        document.getElementById('home_button').addEventListener('click', function (e) {

            console.log(document.getElementById('top_yahaba_aframe').getAttribute('src'));
            var iframe_url = document.getElementById('top_yahaba_aframe').getAttribute('src');
            if (document.getElementById('top_yahaba_aframe').getAttribute('src') != 'yahaba_school_top.html') {
                document.getElementById('top_yahaba_aframe').setAttribute('src', 'yahaba_school_top.html');
                document.getElementById('classroom_text').classList.remove("scrollin");
                document.getElementById('classroom_text2').classList.remove("scrollin");
                document.getElementById('right_button').classList.remove("fadein");
                document.getElementById('left_button').classList.remove("fadein");
                document.getElementById('right_button').style.visibility = 'hidden';
                document.getElementById('left_button').style.visibility = 'hidden';

            } else {
                swal.fire({
                    title: 'すでにトップ画面だよ'
                    , confirmButtonColor: '#004EA2'
                })
            }

        });


        document.getElementById('left_button').addEventListener('click', function (e) {

            if (document.getElementById('left_button').style.visibility == 'visible') {
                var leftbtn_cnt = 0;
                switch (Number(this_id2)) {
                    case 1:
                        for (i = 0; i < 10; i++) {
                            if (result[Number(csv_column) + i][0] == this_id1) {
                                leftbtn_cnt++;
                            } else {
                                // alert(leftbtn_cnt);
                                break;
                            }
                        }

                        // syoukai_page(result[Number(csv_column) + (leftbtn_cnt - 1)][3], Number(this_id1), Number(this_id2) + (leftbtn_cnt - 1));
                        syoukai_page(Number(this_id1), Number(this_id2) + (leftbtn_cnt - 1));
                        reset_txt = result[csv_column][3];
                        alert("case1だよ");
                        break;

                    case 2:
                        syoukai_page(Number(this_id1), Number(this_id2) - 1);
                        alert("case2だよ");
                        break;
                    case 3:
                        syoukai_page(Number(this_id1), Number(this_id2) - 1);
                        alert("case3だよ");



                        break;
                    case 4:
                        syoukai_page(Number(this_id1), Number(this_id2) - 1);
                        alert("case4だよ");


                        break;
                    case 5:
                        syoukai_page(Number(this_id1), Number(this_id2) - 1);
                        alert("case5だよ");


                        break;
                }

            }

        });

        document.getElementById('right_button').addEventListener('click', function (e) {

            if (document.getElementById('right_button').style.visibility == 'visible') {

                switch (Number(this_id2)) {
                    case 1:
                        // reset_txt = result[csv_column][3];
                        if (result[Number(csv_column) + 1][0] == Number(this_id1)) {

                            syoukai_page(Number(this_id1), Number(this_id2) + 1);

                            alert("case1だよ");
                        } else {
                            syoukai_page(Number(this_id1), 1);
                            alert(reset_txt);
                        }
                        break;

                    case 2:
                        if (result[Number(csv_column) + 1][0] == Number(this_id1)) {
                            syoukai_page(Number(this_id1), Number(this_id2) + 1);
                            alert("case2だよ");
                        } else {
                            syoukai_page(Number(this_id1), 1);
                            alert(reset_txt);
                        }
                        break;
                    case 3:
                        if (result[Number(csv_column) + 1][0] == Number(this_id1)) {
                            syoukai_page(Number(this_id1), Number(this_id2) + 1);
                            alert("case3だよ");
                        } else {
                            syoukai_page(Number(this_id1), 1);
                            alert(reset_txt);

                        }


                        break;
                    case 4:

                        if (result[Number(csv_column) + 1][0] == Number(this_id1)) {
                            syoukai_page(Number(this_id1), Number(this_id2) + 1);
                            alert("case4だよ");
                        } else {
                            syoukai_page(Number(this_id1), 1);
                            alert(reset_txt);

                        }

                        break;
                    case 5:
                        if (result[Number(csv_column) + 1][0] == Number(this_id1)) {
                            syoukai_page(Number(this_id1), Number(this_id2) + 1);
                            alert("case5だよ");
                        } else {
                            syoukai_page(Number(this_id1), 1);
                            alert(reset_txt);

                        }

                        break;
                }
            }

        });



        document.getElementById('game_button').addEventListener('click', function (e) {

            if (document.getElementById('top_yahaba_aframe').getAttribute('src') != 'yahaba_school_top.html') {
                //iframeのdocumentを取得する（Mozilla系 || 古いIE系）


                var iframeElem = document.getElementsByTagName('iframe');

                var iframeDocument = iframeElem[0].contentDocument || iframeElem[0].contentWindow.document;

                // var doc2 = this.contentDocument || this.contentWindow.document;
                console.log((iframeDocument.getElementById('back-ground').getAttribute('src')));
                //紹介ページでの背景のurlは取得済み。例meka_cad.jpg
                var img_url = iframeDocument.getElementById('back-ground').getAttribute('src');

                // document.getElementById('top_yahaba_aframe').setAttribute('src', 'Marubatu01.html?a='+img_url);
                //下記の処理でMaruBatu.htmlのmarubatu_game関数を呼びゲームスタート
                try {
                    document.getElementById('top_yahaba_aframe').contentWindow.marubatu_game();
                } catch (error) {
                    swal.fire({
                        title: 'すでにゲーム中だよ'
                        , confirmButtonColor: '#004EA2'
                    }).then(function (result) {
                        console.log(result);
                    });
                }

                // document.getElementById('top_yahaba_aframe').getAttribute('src');
                // window.location.href = '/aframegame1/MaruBatu01.html?a='+text;


            }

        });

        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('zyohou_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';


        // function kentiku(text, id1, id2) {
        // var kentiku_list = document.getElementById('kentiku_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // console.log(kentiku_list);
        // if (kentiku_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;

        // document.getElementById('kentiku_list').style.display = 'inline-block';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('zyohou_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('kentiku_list').style.display = 'none';
        // }
        // }
        // function sande(text, id1, id2) {
        // var sande_list = document.getElementById('sande_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (sande_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('sande_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('zyohou_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('sande_list').style.display = 'none';
        // }
        // }
        // function mekatoro(text, id1, id2) {
        // var mekatoro_list = document.getElementById('mekatoro_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (mekatoro_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('mekatoro_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('zyohou_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('mekatoro_list').style.display = 'none';
        // }
        // }
        // function densi(text, id1, id2) {
        // var densi_list = document.getElementById('densi_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (densi_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('densi_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('zyohou_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('densi_list').style.display = 'none';
        // }
        // }
        // function zyohou(text, id1, id2) {
        // var zyohou_list = document.getElementById('zyohou_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (zyohou_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('zyohou_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('senkou_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('zyohou_list').style.display = 'none';
        // }
        // }

        // function senkou(text, id1, id2) {
        // var senkou_list = document.getElementById('senkou_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (senkou_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('senkou_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // document.getElementById('honkan_list').style.display = 'none';
        // } else {
        // document.getElementById('senkou_list').style.display = 'none';
        // }
        // }

        // function honkan(text, id1, id2) {
        // var honkan_list = document.getElementById('honkan_list').style.display;
        // var Top_yahaba_Aframe = document.getElementById('top_yahaba_aframe');
        // if (honkan_list == 'none') {
        // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
        // document.getElementById('honkan_list').style.display = 'inline-block';
        // document.getElementById('kentiku_list').style.display = 'none';
        // document.getElementById('sande_list').style.display = 'none';
        // document.getElementById('mekatoro_list').style.display = 'none';
        // document.getElementById('densi_list').style.display = 'none';
        // } else {
        // document.getElementById('honkan_list').style.display = 'none';
        // }
        // }



        function syoukai_page(id1, id2) {

            //元々はsyoukai_pageの引数から判定していた。変更後はgetCSV関数にて判定。
            // Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + text + "=" + id1 + "=" + id2;
            this_id1 = id1;
            this_id2 = id2;
            // getCSV();
            syoukai_hantei();


            // button_visi();

            //リストかオブジェクトから、飛んだ時にどの科にいるか指定
            switch (Number(this_id1)) {
                case 1:
                    reset_txt = 'mekatoro_kikaikakou';
                    break;

                case 2:
                    reset_txt = 'densi_computer';
                    break;

                case 3:
                    reset_txt = 'kentiku_zisyuzyou';
                    break;

                case 4:
                    reset_txt = 'sande_dezainjikken';
                    break;

                case 5:
                    reset_txt = 'zyohou_keisanki';
                    break;

                case 6:
                    reset_txt = 'senkou_zisyu';
                    break;

                case 7:
                    reset_txt = 'honkan_tamoku';
                    break;
            }

            if (document.getElementById('classroom_text').classList.contains("scrollin")) {
                document.getElementById('classroom_text').classList.remove("scrollin");
                document.getElementById('classroom_text2').classList.add("scrollin");

            } else if (document.getElementById('classroom_text2').classList.contains("scrollin")) {
                document.getElementById('classroom_text2').classList.remove("scrollin");
                document.getElementById('classroom_text').classList.add("scrollin");
            } else {
                document.getElementById('classroom_text').classList.add("scrollin");
            }


            Top_yahaba_Aframe.onload = function(){
             
                button_visi();
            } 




        }

        function syoukai_hantei() {
            var hantei_id1;
            var i;

            //tmp.lengthは読み込んだcsvファイルの行数の格納変数
            console.log(tmp.length);



            for (var i = 0; i <= tmp.length; i++) {
                var str = result[i][0];
                if (str == this_id1) {
                    console.log("一致");
                    console.log("id1" + this_id1);
                    console.log(str);
                    console.log(i);
                    hantei_id1 = i;
                    break;
                }
            }

            for (var j = hantei_id1; j <= tmp.length; j++) {
                console.log("a2=" + j);
                var str2 = result[j][1];
                if (str2 == this_id2) {
                    console.log(str2);
                    console.log(j);
                    console.log(result[j][2]);
                    csv_column = j;
                    break;
                }

            }

            console.log(csv_column);
            // result[csv_column][2]
            Top_yahaba_Aframe.src = "/aframegame1/syoukai/main_syoukai.html?a=" + result[csv_column][3] + "=" + this_id1 + "=" + this_id2;
            
            syoukai_text();
        }


        function syoukai_text() {
            console.log(csv_column);
            console.log(result[csv_column][2]);
            document.getElementById('classroom_text').textContent = result[csv_column][2];
            document.getElementById('classroom_text2').textContent = result[csv_column][2];

            // var text = result[csv_column][2];
            // var elem = document.getElementById("syoukai_text");
            // elem.innerHTML = text;
            // document.getElementById("syoukai_text").textContent = text;
        }


        function yahaba_school() {
            document.getElementById('mizusawa_school').style.display = 'none';
            document.getElementById('yahaba_school').style.display = 'flex';

        }
        function mizusawa_school() {
            document.getElementById('yahaba_school').style.display = 'none';
            document.getElementById('mizusawa_school').style.display = 'flex';

        }



        function getCSV() {
            var req = new XMLHttpRequest(); // HTTPでファイルを読み込むためのXMLHttpRrequestオブジェクトを生成
            req.open("get", "main_syoukai.csv", true); // アクセスするファイルを指定
            req.send(null); // HTTPリクエストの発行

            // レスポンスが返ってきたらconvertCSVtoArray()を呼ぶ 
            req.onload = function () {

                convertCSVtoArray(req.responseText); // 渡されるのは読み込んだCSVデータ
            }
        }

        // 読み込んだCSVデータを二次元配列に変換する関数convertCSVtoArray()の定義
        function convertCSVtoArray(str) { // 読み込んだCSVデータが文字列として渡される
            // 最終的な二次元配列を入れるための配列
            tmp = str.split("\n"); // 改行を区切り文字として行を要素とした配列を生成

            // 各行ごとにカンマで区切った文字列を要素とした二次元配列を生成
            for (var i = 0; i < tmp.length; ++i) {
                result[i] = tmp[i].split(',');
            }

            console.log(result[1][2]); // 300yen
            // syoukai_hantei();

        }



        // author ISHIDATE Katsuyoshi
        // transition
        var script = document.createElement('script');
        script.src = atob("Li90cmFucy5qcw==");
        document.head.appendChild(script);

        //scene list
        var requestURL = atob('dG91ci5qc29u');
        var request;
        if ('ActiveXObject' in window) {
            request = new ActiveXObject("Microsoft.XMLHTTP");
        } else {
            request = new XMLHttpRequest();
        }
        request.open("GET", requestURL);



        var viewer;
        request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
                var tour = JSON.parse(request.responseText);
                viewer = pannellum.viewer('panorama', tour);
                // event
                // scene changed
                viewer.on('load', function () {
                    guide.src = './sounds/' + viewer.getScene() + '.mp3';;
                    if (sound === true) {
                        //guide.load();
                        guide.play();
                    } else {
                        guide.pause();
                    }
                    if (viewer.getScene() === "y1" || viewer.getScene() === "m1") {
                        home = viewer.getScene();
                    }
                    if (viewer.getScene() === home) {
                        document.getElementById('exit').classList.remove('recommended');
                    } else {
                        document.getElementById('exit').classList.add('recommended');
                    }
                });
                //menu event yahaba
                document.getElementById('y_campus').addEventListener('click', function (e) {
                    viewer.loadScene("y1");
                    this.classList.add('active');
                    document.getElementById('m_campus').classList.remove('active');
                });
                //menu event mizusawa
                document.getElementById('m_campus').addEventListener('click', function (e) {
                    viewer.loadScene("m1");
                    this.classList.add('active');
                    document.getElementById('y_campus').classList.remove('active');
                });
                //sound play or pause
                var sound = false;
                var home = 'y1';
                var guide = document.getElementById('guide');
                var bgm = document.getElementById('bgm');
                guide.src = './sounds/y1.mp3';
                guide.pause();
                bgm.pause();
                document.getElementById('play_pause').addEventListener('click', function (e) {
                    if (sound === false) {
                        guide.play();
                        bgm.play();
                        this.firstChild.src = "images/ico_play.png";
                        sound = true
                    } else {
                        guide.pause();
                        bgm.pause();
                        this.firstChild.src = "images/ico_pause.png";
                        sound = false
                    }
                });
                // home
                document.getElementById('home').addEventListener('click', function (e) {
                    viewer.loadScene(home);
                });
                // change place
                document.getElementById('exit').addEventListener('click', function (e) {
                    viewer.loadScene(nextPlace(viewer.getScene()));
                });
                // zoomin
                document.getElementById('zoomin').addEventListener('click', function (e) {
                    viewer.setHfov(viewer.getHfov() - 10);
                });
                // zoomout
                document.getElementById('zoomout').addEventListener('click', function (e) {
                    viewer.setHfov(viewer.getHfov() + 10);
                });
                // full-shrink
                document.getElementById('full').addEventListener('click', function (e) {
                    viewer.toggleFullscreen();
                });
                document.addEventListener('fullscreenchange', function (e) {
                    if (document.fullscreenElement) {
                        document.getElementById('full').firstChild.src = 'images/ico_return.png';
                    } else {
                        document.getElementById('full').firstChild.src = 'images/ico_full.png';
                    }
                });
                // compass
                if (viewer.isOrientationSupported()) {
                    var orientation_status = false;
                    document.getElementById('compass').style.display = "inline-block";
                    document.getElementById('compass').addEventListener('click', function (e) {
                        if (orientation_status = !orientation_status) {
                            viewer.startOrientation();
                            this.firstChild.src = 'images/ico_compassoff.png';
                        } else {
                            viewer.stopOrientation();
                            this.firstChild.src = 'images/ico_compasson.png';
                        }
                    });

                } else {
                    document.getElementById('compass').style.display = "none";
                }

            }
        };
        request.send();
    </script>

</body>

</html>